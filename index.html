<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Jamalese Translator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
* { box-sizing:border-box; }

:root {
  --bg:#f4f6fb;
  --card:#ffffff;
  --text:#111;
  --muted:#555;
  --accent:#4b5cff;
  --border:#d6d9ee;
  --input:#ffffff;
}

[data-theme="dark"] {
  --bg:#070914;
  --card:#151a33;
  --text:#f1f3ff;
  --muted:#aab;
  --accent:#7c8cff;
  --border:#2b2f55;
  --input:#0e1228;
}

body {
  margin:0;
  font-family:system-ui,sans-serif;
  background:var(--bg);
  color:var(--text);
  transition:background-color .4s ease,color .4s ease;
}

.container {
  max-width:1100px;
  margin:60px auto;
  padding:20px;
}

.card {
  background:var(--card);
  border-radius:20px;
  padding:28px;
  box-shadow:0 30px 80px rgba(0,0,0,.35);
  transition:background-color .4s ease;
}

header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:20px;
}

h1 {
  margin:0;
  font-size:28px;
  transition:color .4s ease;
}

/* ---------- Dark Toggle ---------- */
.theme-toggle {
  display:flex;
  align-items:center;
  gap:8px;
}

.switch {
  width:52px;
  height:28px;
  background:#bbb;
  border-radius:999px;
  position:relative;
  cursor:pointer;
  transition:background .3s ease;
}

.switch::after {
  content:"";
  width:22px;
  height:22px;
  background:white;
  border-radius:50%;
  position:absolute;
  top:3px;
  left:3px;
  transition:transform .3s ease;
}

[data-theme="dark"] .switch {
  background:var(--accent);
}

[data-theme="dark"] .switch::after {
  transform:translateX(24px);
}

/* ---------- Layout ---------- */
.panes {
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:18px;
}

.pane {
  display:flex;
  flex-direction:column;
}

/* ---------- Language Tabs ---------- */
.lang-tabs {
  position:relative;
  display:flex;
  gap:20px;
  border-bottom:1px solid var(--border);
  margin-bottom:8px;
}

.lang-tab {
  padding:8px 0;
  cursor:pointer;
  color:var(--muted);
  transition:color .25s ease;
}

.lang-tab.active {
  color:var(--accent);
}

.underline {
  position:absolute;
  bottom:-1px;
  height:2px;
  background:var(--accent);
  border-radius:2px;
  transition:left .3s ease,width .3s ease;
}

/* ---------- Text Areas ---------- */
textarea {
  height:260px;
  resize:none;
  padding:14px;
  font-size:16px;
  border-radius:14px;
  border:1px solid var(--border);
  background:var(--input);
  color:var(--text);
  transition:background-color .4s ease,color .4s ease,border-color .4s ease;
}

.output-box {
  position:relative;
  height:260px;
  padding:14px 14px 56px;
  border-radius:14px;
  background:rgba(0,0,0,.04);
  overflow-y:auto;
  font-size:18px;
  transition:background-color .4s ease;
}

[data-theme="dark"] .output-box {
  background:rgba(255,255,255,.06);
}

/* ---------- Copy Button ---------- */
.copy-btn {
  position:absolute;
  bottom:10px;
  left:10px;
  width:38px;
  height:38px;
  border-radius:10px;
  border:1px solid var(--border);
  background:var(--input);
  cursor:pointer;
  font-size:18px;
  opacity:0;
  pointer-events:none;
  transition:opacity .25s ease;
}

.copy-btn.visible {
  opacity:1;
  pointer-events:auto;
}

/* ---------- Footer ---------- */
.footer {
  margin-top:22px;
  font-size:13px;
  display:flex;
  justify-content:space-between;
  color:var(--muted);
}

.footer a {
  color:var(--accent);
  text-decoration:none;
}

/* ---------- Mobile ---------- */
@media (max-width:700px) {
  .panes { grid-template-columns:1fr; }
}
</style>
</head>

<body>

<div class="container">
<div class="card">

<header>
  <h1>Jamalese Translator</h1>
  <div class="theme-toggle">
    ‚òÄÔ∏è
    <div class="switch" id="themeSwitch"></div>
    üåô
  </div>
</header>

<div class="panes">

  <!-- LEFT -->
  <div class="pane">
    <div class="lang-tabs" id="sourceTabs">
      <div class="lang-tab active" data-lang="auto">Auto</div>
      <div class="lang-tab" data-lang="jam">Zam≈ìlis</div>
      <div class="lang-tab" data-lang="eng">English</div>
      <div class="underline"></div>
    </div>
    <textarea id="input" placeholder="Type text here..."></textarea>
  </div>

  <!-- RIGHT -->
  <div class="pane">
    <div class="lang-tabs" id="targetTabs">
      <div class="lang-tab active" data-lang="eng">English</div>
      <div class="lang-tab" data-lang="jam">Zam≈ìlis</div>
      <div class="underline"></div>
    </div>
    <div class="output-box">
      <div id="result"></div>
      <button class="copy-btn" id="copyBtn">üìã</button>
    </div>
  </div>

</div>

<div class="footer">
  <span>View the full dictionary at <a href="https://newhs.cc/dict">newhs.cc/dict</a></span>
  <span>Created by <a href="https://github.com/nadfd">nadfd</a></span>
</div>

</div>
</div>

<script src="https://newhs.cc/words.js"></script>

<script>
/* ---------- Dark Mode ---------- */
const themeSwitch = document.getElementById("themeSwitch");
document.documentElement.dataset.theme = "dark";

themeSwitch.onclick = () => {
  document.documentElement.dataset.theme =
    document.documentElement.dataset.theme === "dark" ? "light" : "dark";
};

/* ---------- Dictionary Auto Update ---------- */
const JAM_TO_ENG = window.jamToEng || {};
const ENG_TO_JAM = window.engToJam || {};

/* ---------- Tabs + Underline ---------- */
function setupTabs(container, setLang) {
  const tabs = container.querySelectorAll(".lang-tab");
  const underline = container.querySelector(".underline");

  function updateUnderline(tab) {
    underline.style.width = tab.offsetWidth + "px";
    underline.style.left = tab.offsetLeft + "px";
  }

  tabs.forEach(tab => {
    tab.onclick = () => {
      tabs.forEach(t => t.classList.remove("active"));
      tab.classList.add("active");
      setLang(tab.dataset.lang);
      updateUnderline(tab);
      translate();
    };
  });

  updateUnderline(container.querySelector(".active"));
}

let sourceLang = "auto";
let targetLang = "eng";

setupTabs(sourceTabs, l => sourceLang = l);
setupTabs(targetTabs, l => targetLang = l);

/* ---------- Translation ---------- */
const input = document.getElementById("input");
const result = document.getElementById("result");
const copyBtn = document.getElementById("copyBtn");

function detectLang(word) {
  if (JAM_TO_ENG[word]) return "jam";
  if (ENG_TO_JAM[word]) return "eng";
  return "eng";
}

function translate() {
  const text = input.value.trim();
  if (!text) {
    result.textContent = "";
    copyBtn.classList.remove("visible");
    return;
  }

  let words = text.toLowerCase().split(/\s+/);
  let output = [];
  let src = sourceLang === "auto" ? detectLang(words[0]) : sourceLang;

  for (let w of words) {
    if (src === "jam" && targetLang === "eng")
      output.push(JAM_TO_ENG[w] || w);
    else if (src === "eng" && targetLang === "jam")
      output.push(ENG_TO_JAM[w] || w);
    else
      output.push(w);
  }

  result.textContent = output.join(" ");
  copyBtn.classList.add("visible");
}

input.addEventListener("input", translate);

/* ---------- Copy ---------- */
copyBtn.onclick = () =>
  navigator.clipboard.writeText(result.textContent);
</script>

</body>
</html>
