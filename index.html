<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Jamalese Translator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
* { box-sizing:border-box; }

:root {
  --bg:#f4f6fb;
  --card:#ffffff;
  --text:#111;
  --muted:#666;
  --accent:#4b5cff;
  --border:#d6d9ee;
  --input:#ffffff;
}

[data-theme="dark"] {
  --bg:#070914;
  --card:#151a33;
  --text:#f1f3ff;
  --muted:#aab;
  --accent:#7c8cff;
  --border:#2b2f55;
  --input:#0e1228;
}

body {
  margin:0;
  font-family:system-ui,sans-serif;
  background:var(--bg);
  color:var(--text);
  transition:background-color .4s,color .4s;
}

.container {
  max-width:1100px;
  margin:60px auto;
  padding:20px;
}

.card {
  background:var(--card);
  border-radius:22px;
  padding:28px;
  box-shadow:0 30px 80px rgba(0,0,0,.35);
  transition:background-color .4s;
}

/* ---------- Header ---------- */
header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:20px;
}

h1 {
  margin:0;
  font-size:28px;
  transition:color .4s;
}

/* ---------- Dark Toggle ---------- */
.theme-toggle {
  display:flex;
  align-items:center;
  gap:8px;
}

.switch {
  position:relative;
  width:52px;
  height:26px;
}

.switch input { display:none; }

.slider {
  position:absolute;
  inset:0;
  background:#bbb;
  border-radius:30px;
  transition:.4s;
}

.slider::before {
  content:"";
  position:absolute;
  width:20px;
  height:20px;
  left:3px;
  top:3px;
  background:white;
  border-radius:50%;
  transition:.4s;
}

input:checked + .slider {
  background:var(--accent);
}

input:checked + .slider::before {
  transform:translateX(26px);
}

/* ---------- Panes ---------- */
.panes {
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:18px;
}

.pane {
  display:flex;
  flex-direction:column;
  height:340px;
}

/* ---------- Tabs ---------- */
.tabs {
  position:relative;
  display:flex;
  gap:22px;
  margin-bottom:8px;
}

.tab {
  cursor:pointer;
  color:var(--muted);
  padding:6px 2px;
  transition:color .25s;
}

.tab.active {
  color:var(--accent);
}

.underline {
  position:absolute;
  bottom:0;
  height:2px;
  background:var(--accent);
  border-radius:2px;
  transition:.3s ease;
}

/* ---------- Text Areas ---------- */
textarea {
  flex:1;
  resize:none;
  padding:14px;
  border-radius:16px;
  border:1px solid var(--border);
  background:var(--input);
  color:var(--text);
  font-size:16px;
  transition:.4s;
}

.output {
  flex:1;
  padding:14px 14px 56px;
  border-radius:16px;
  background:rgba(0,0,0,.04);
  transition:.4s;
  overflow:auto;
}

[data-theme="dark"] .output {
  background:rgba(255,255,255,.06);
}

/* ---------- Copy Button ---------- */
.copy {
  position:absolute;
  bottom:10px;
  left:10px;
  width:38px;
  height:38px;
  border-radius:10px;
  border:1px solid var(--border);
  background:var(--input);
  cursor:pointer;
  font-size:18px;
  opacity:0;
  pointer-events:none;
  transition:.3s;
}

.copy.visible {
  opacity:1;
  pointer-events:auto;
}

/* ---------- Footer ---------- */
.footer {
  margin-top:22px;
  font-size:13px;
  display:flex;
  justify-content:space-between;
  color:var(--muted);
}

.footer a {
  color:var(--accent);
  text-decoration:none;
}

@media (max-width:750px) {
  .panes { grid-template-columns:1fr; }
  .pane { height:260px; }
}
</style>
</head>

<body>

<div class="container">
<div class="card">

<header>
  <h1>Jamalese Translator</h1>
  <div class="theme-toggle">
    ‚òÄÔ∏è
    <label class="switch">
      <input type="checkbox" id="themeToggle" checked>
      <span class="slider"></span>
    </label>
    üåô
  </div>
</header>

<div class="panes">
  <!-- LEFT -->
  <div class="pane">
    <div class="tabs" id="sourceTabs">
      <div class="tab active" data-lang="auto">Auto</div>
      <div class="tab" data-lang="jam">Zam≈ìlis</div>
      <div class="tab" data-lang="eng">English</div>
      <div class="underline"></div>
    </div>
    <textarea id="input" placeholder="Type text here..."></textarea>
  </div>

  <!-- RIGHT -->
  <div class="pane" style="position:relative;">
    <div class="tabs" id="targetTabs">
      <div class="tab active" data-lang="eng">English</div>
      <div class="tab" data-lang="jam">Zam≈ìlis</div>
      <div class="underline"></div>
    </div>
    <div class="output" id="output"></div>
    <button class="copy" id="copy">üìã</button>
  </div>
</div>

<div class="footer">
  <span>View the full dictionary at <a href="https://newhs.cc/dict">newhs.cc/dict</a></span>
  <span>v1.0 ¬∑ by <a href="https://github.com/nadfd">nadfd</a></span>
</div>

</div>
</div>

<!-- AUTO-UPDATING DICTIONARY -->
<script src="https://newhs.cc/words.js"></script>

<script>
/* ---------- Theme ---------- */
const toggle=document.getElementById("themeToggle");
document.documentElement.dataset.theme="dark";
toggle.onchange=()=>document.documentElement.dataset.theme=
  toggle.checked?"dark":"light";

/* ---------- Tabs + underline ---------- */
function setupTabs(el, onChange) {
  const tabs=[...el.querySelectorAll(".tab")];
  const line=el.querySelector(".underline");

  function move(tab){
    line.style.width=tab.offsetWidth+"px";
    line.style.left=tab.offsetLeft+"px";
  }

  tabs.forEach(t=>{
    t.onclick=()=>{
      tabs.forEach(x=>x.classList.remove("active"));
      t.classList.add("active");
      move(t);
      onChange(t.dataset.lang);
    };
  });

  requestAnimationFrame(()=>move(el.querySelector(".active")));
}

let src="auto", tgt="eng";
setupTabs(sourceTabs,l=>{src=l;translate();});
setupTabs(targetTabs,l=>{tgt=l;translate();});

/* ---------- Translation ---------- */
const input=document.getElementById("input");
const output=document.getElementById("output");
const copy=document.getElementById("copy");

function detectLang(text){
  for (let w of text.split(/\s+/))
    if (jamaleseToEnglish[w]) return "jam";
  return "eng";
}

function translate(){
  const text=input.value.trim();
  if(!text){output.textContent="";copy.classList.remove("visible");return;}

  let from=src==="auto"?detectLang(text):src;
  let dict=from==="jam"?jamaleseToEnglish:englishToJamalese;

  let words=text.split(/\s+/);
  let res=[];
  for(let i=0;i<words.length;i++){
    let found=false;
    for(let l=5;l>0;l--){
      let phrase=words.slice(i,i+l).join(" ");
      if(dict[phrase]){
        res.push(dict[phrase]);
        i+=l-1;
        found=true;
        break;
      }
    }
    if(!found) res.push(words[i]);
  }

  output.textContent=res.join(" ");
  copy.classList.add("visible");
}

input.addEventListener("input",translate);

/* ---------- Copy ---------- */
copy.onclick=()=>{
  navigator.clipboard.writeText(output.textContent);
};
</script>

</body>
</html>
